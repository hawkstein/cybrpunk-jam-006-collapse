[gd_resource type="BehaviorTree" load_steps=21 format=3 uid="uid://dein6g8t4i6fa"]

[ext_resource type="Script" uid="uid://dtlkq1frlraft" path="res://ai/tasks/choose_random_connection.gd" id="1_bllos"]
[ext_resource type="Script" uid="uid://bje4ujmdai0yl" path="res://ai/tasks/check_traces.gd" id="2_aqm1j"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_hhoww"]

[sub_resource type="BBVariant" id="BBVariant_mrdxm"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckAgentProperty" id="BTCheckAgentProperty_iwnsd"]
property = &"hunting"
value = SubResource("BBVariant_mrdxm")
custom_name = "Check if hunting"

[sub_resource type="BTConsolePrint" id="BTConsolePrint_bvufh"]
text = "hunting..."

[sub_resource type="BTWait" id="BTWait_mtd04"]
duration = 1.5

[sub_resource type="BTAction" id="BTAction_xpt8l"]
script = ExtResource("1_bllos")

[sub_resource type="BTSequence" id="BTSequence_xnqya"]
custom_name = "Hunt player"
children = [SubResource("BTCheckAgentProperty_iwnsd"), SubResource("BTConsolePrint_bvufh"), SubResource("BTWait_mtd04"), SubResource("BTAction_xpt8l")]

[sub_resource type="BTCondition" id="BTCondition_ojx1q"]
custom_name = "Check for traces"
script = ExtResource("2_aqm1j")

[sub_resource type="BTConsolePrint" id="BTConsolePrint_sd8pu"]
text = "traces found!"

[sub_resource type="BBVariant" id="BBVariant_5djcd"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTSetAgentProperty" id="BTSetAgentProperty_kq4bo"]
property = &"hunting"
value = SubResource("BBVariant_5djcd")
custom_name = "Start hunting"

[sub_resource type="BTSequence" id="BTSequence_26glc"]
custom_name = "Examine server"
children = [SubResource("BTCondition_ojx1q"), SubResource("BTConsolePrint_sd8pu"), SubResource("BTSetAgentProperty_kq4bo")]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_ffpwn"]
text = "patrolling"

[sub_resource type="BTWait" id="BTWait_mrdxm"]
duration = 3.0

[sub_resource type="BTAction" id="BTAction_aqm1j"]
script = ExtResource("1_bllos")

[sub_resource type="BTSequence" id="BTSequence_hhoww"]
custom_name = "Patrol servers"
children = [SubResource("BTConsolePrint_ffpwn"), SubResource("BTWait_mrdxm"), SubResource("BTAction_aqm1j")]

[sub_resource type="BTSelector" id="BTSelector_aqm1j"]
custom_name = "Patrol and check"
children = [SubResource("BTSequence_26glc"), SubResource("BTSequence_hhoww")]

[sub_resource type="BTSelector" id="BTSelector_bllos"]
children = [SubResource("BTSequence_xnqya"), SubResource("BTSelector_aqm1j")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_hhoww")
root_task = SubResource("BTSelector_bllos")
